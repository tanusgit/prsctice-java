<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">

<link rel="stylesheet" type="text/css" href="How%20to%20use%20the%20useradd%20command,%20by%20The%20Linux%20Information%20Project%20(LINFO)_files/belug1.css">

<title>How to use the useradd command, by The Linux Information Project (LINFO)</title></head>

<body bgcolor="#ffffff">

<a href="http://www.linfo.org/index.html">LINFO</a>
<br><br><center><h2>The useradd Command</h2></center><br>

<table width="540" align="center"><tbody><tr><td>



<p>
The <i>useradd</i> <a href="http://www.linfo.org/command.html">command</a> is used on <a href="http://www.linfo.org/linuxdef.html">Linux</a> and other <a href="http://www.linfo.org/unix-like.html">Unix-like</a> <a href="http://www.linfo.org/operating_system.html">operating systems</a> both to add new users (also referred to as <i>accounts</i>), inclusive of their user names, passwords and other data, and to update default new user information. The <i>adduser</i> command is identical to useradd, because it is merely a <a href="http://www.linfo.org/soft_link.html">symbolic link</a> to it.
</p>

<p>
useradd's basic syntax is 
</p>

<blockquote>
<p>
<code>useradd [option(s)] username</code>
</p>
</blockquote>

<p>
By default, useradd can only be used by the <a href="http://www.linfo.org/root.html"><i>root</i></a> (i.e., omnipotent administrative) account. On home <a href="http://www.linfo.org/computer.html">computers</a> and other computers over which the user has complete control, the root account can be accessed by <a href="http://www.linfo.org/login_def.html">logging in</a> as root or, preferably, by using the <a href="http://www.linfo.org/su.html"><i>su</i></a> (i.e., <i>substitute user</i>) command. 
</p>

<p>
The useradd <i>binary</i> (i.e., the ready-to-run <a href="http://www.linfo.org/program.html">program</a> file) is typically located in the <a href="http://www.linfo.org/root.html"><i>/usr/sbin</i></a> <a href="http://www.linfo.org/directory.html">directory</a>, which contains non-vital system utilities that are used after <a href="http://www.linfo.org/boot.html">booting</a> (i.e., starting the system). If this directory is not in the root user's <a href="http://www.linfo.org/path_env_var.html">PATH</a> (i.e., the directories in which the system searches for commands issued by the root user), an error message such as <i>bash: useradd: command not found</i> will be displayed. In such case, the command should be typed using its <a href="http://www.linfo.org/absolute_pathname.html"><i>full path</i></a> (i.e., the full hierarchy of directories from it to the <a href="http://www.linfo.org/root_directory.html">root directory</a>), which would be <i>/usr/sbin/useradd</i>.
</p>

<p>
To add a new user to the system, all that is necessary is to follow the 
useradd or adduser command by that user's user name. This name is the <i>login name</i>,
 that is, the name that the user uses when logging into the system. Only
 one name can be added with each use of the command, and the name must 
be unique (i.e., different from every other user name already on the 
system). Thus, for example, to add a new user with a user name <i>joseph</i> to the system, all that is necessary is to type the following and press the Enter key:
</p>

<blockquote>
<p>
<code>/usr/sbin/useradd joseph</code>
</p>
</blockquote>

<p>
Adding a new user automatically adds an entry to the <a href="http://www.linfo.org/etc_passwd.html"><i>/etc/passwd</i></a> <a href="http://www.linfo.org/file.html">file</a>,
 which is used to store data about users. Each entry in this file 
consists of a single line containing a set of seven colon-separated 
fields, for example,
</p>

<blockquote>
joseph:x:504:504:Joseph:/home/joseph:/bin/bash
</blockquote>

<p>
The fields are the user's login name, password (or just the letter <i>x</i> or an asterisk in the likely event that <i>shadow passwords</i> are used), <a href="http://www.linfo.org/uid.html">UID</a> (user identification number), GID (group identification number), comment (optional), user's <a href="http://www.linfo.org/home_directory.html">home directory</a> and default <a href="http://www.linfo.org/shell.html">shell</a> (usually <i>bash</i>
 on Linux). On a system with shadow passwords enabled, the actual 
passwords are encrypted and stored in a separate file which is only 
accessible to the root account. 
</p>

<p>
/etc/passwd can be edited by the root user with the use of any <a href="http://www.linfo.org/text_editor.html">text editor</a>, such as <a href="http://www.linfo.org/vi/index.html"><i>vi</i></a> or <a href="http://www.linfo.org/gedit.html"><i>gedit</i></a>, and it can be viewed by any user by using one of these editors or by employing a command such as <a href="http://www.linfo.org/cat.html"><i>cat</i></a>, i.e., 
</p>

<blockquote>
<p>
<code>cat /etc/passwd</code>
</p>
</blockquote>

<p>
adduser's flexibility is enhanced by the availability of a number of <a href="http://www.linfo.org/option.html">options</a>. Among the more commonly used is <i>-c</i>,
 which allows a comment, such as the user's real name and phone number, 
to be added to /etc/passwd. The comment can be written as a single <a href="http://www.linfo.org/string.html"><i>string</i></a> (i.e., a sequence of <a href="http://www.linfo.org/character.html">characters</a>
 without any intervening spaces), or it can be multiple strings enclosed
 in quotes. For example, the following would add a user named <i>joe</i> and would insert that user's full name, <i>Joe Smith</i>, into the comment field:
</p>

<blockquote>
<p>
<code>useradd -c "Joe Smith" joe</code>
</p>
</blockquote>


<p>
By default the <a href="http://www.linfo.org/home_directory.html">home directory</a>
 of each user (i.e., the directory that contains a user's personal files
 and that a user is first in after logging in) will reside in the <a href="http://www.linfo.org/home.html"><i>/home</i></a> directory and will have the same name as the user. Thus, for example, the default home directory for the new user joe would be <i>/home/joe</i>. However, this behavior can be overriden by using the <i>-d</i>
 option followed by the full path for the desired new home directory 
(which need not be in /home). For example, the following would create a 
new user named <i>jim</i> with a home directory <i>/home/james</i>: 
</p>

<blockquote>
<p>
<code>useradd -d /home/james jim</code>
</p>
</blockquote>

<p>
The <i>-e</i> option is used to set the date, in YYYY-MM-DD format, on 
which the new account will automatically expire. This is useful for 
creating temporary accounts and for dealing with the tendency of busy 
system administrators to forget to delete them, which can become a 
security risk.
</p>

<p>
The <i>-f</i> option is used to specify the number of days after a 
password expires until the account is permanently disabled. A value of 0
 disables the account as soon as the password has expired. The default 
value is -1, which disables this feature. 
</p>

<p>
The name or number of the new user's initial login group can be specified by placing it after the <i>-g</i>
 option. The group name must already exist, and a group number must 
refer to an already existing group.  The default group number is 1 or 
whatever is specified in the file <i>/etc/default/useradd</i>.
</p>

<p>
The <i>-G</i> option is used to provide a list of additional groups into
 which the user is also included. Each group name or number is separated
 from the next by a comma, with no intervening spaces. The groups are 
subject to the same restrictions as the group specified with the -g 
option. 
</p>

<p>
The <i>-m</i> option, which does not accept any <a href="http://www.linfo.org/argument.html">arguments</a>
 (i.e., input data), creates the user's home directory; however, it is 
not necessary to use it on Red Hat and other systems on which such 
directory is created automatically. The <i>-k</i> option is used together with -m to specify an alternative to the default <a href="http://www.linfo.org/etc_skel.html"><i>/etc/skel</i></a>
 directory as the source of the initial content (i.e., directories and 
files) for the new user's home directory. For example, the following 
would add the contents of a directory named <i>/dir_1</i> to <i>/home/jane</i>, which would be the default home directory of a new user <i>jane</i>:
</p>

<blockquote>
<p>
<code>useradd -m -k /dir_1 jane</code>
</p>
</blockquote>

<p>
The <i>-M</i> option is used to create a new user without creating any 
home directory for that user. When such a user logs into a system that 
has just booted up, its login directory will likely be the root 
directory; when such a user logs into a system using the su command, its
 login directory will be the <a href="http://www.linfo.org/current_directory.html">current directory</a> of the previous user.
</p>

<p>
On Red Hat systems a new group having the same name as the user being added to the system will be created by default. The <i>-n</i> option is used to prevent such group from being created. The <i>-o</i> option allows creation of a user with a non-unique UID.
</p>

<p>
The <i>-p</i> option is used to specify an encrypted password that has been created by the <i>crypt</i>
 command. It is not used to specify the actual password, as this could 
be a security risk (because such password would be retained in the <i>history</i> file).
</p>

<p>
The <i>-r</i> option is used to create accounts for administrative use 
that have some, but not all, root privileges. Such accounts have a UID 
lower than the value of UID_MIN defined in <i>/etc/login.defs</i> 
(typically 500 and above for ordinary users) and have a password that 
does not expire. By default, no home directories are created. 
</p>

<p>
New users are automatically assigned the default login shell, which is <i>bash</i>
 on Linux unless it has been changed systemwide. However, any new user 
can be assigned any other shell as their default by using the <i>-s</i> option followed by the name of the desired shell.
</p>

<p>
The <i>-D</i> option is used to view and change the default values for 
adding users. The following will display the default settings, which 
include the initial group, location of the home directory, when the 
password becomes inactive, when the account expires, the default shell, 
and name of the directory that contains the directories and/or files 
that are added automatically to the new home directory: 
</p>

<blockquote>
<p>
<code>useradd -D</code>
</p>
</blockquote>

<p>
To change any of the default settings for new users, -D is followed by -g, <i>-b</i>,
 -s, -f and/or -e, which are, in turn, followed by an appropriate 
argument. These secondary options are the same as their counterparts 
described above, with the exception of -b, which stands for <i>base</i> 
and is followed by the full path of the directory in which new home 
directories are to be created. Thus, for example, to cause the home 
directory for new users to be located in a directory called <i>/home/users</i>, the following would be used: 
</p>

<blockquote>
<p>
<code>useradd -Db /home/users</code>
</p>
</blockquote>
<p></p>

<p>
Any directory that is specified as the container for new users' home 
directories need not exist at the time it is specified with -Db. But it 
must exist when new users are subsequently created. This can, of course,
 be easily accomplished using the <a href="http://www.linfo.org/mkdir.html">mkdir</a> command, which for the above example would be
</p>

<blockquote>
<p>
<code>mkdir /home/users</code>
</p>
</blockquote>
<p></p>

<p>
As an alternative to using the useradd command, users can also be added 
and their data changed by directly editing /etc/passwd. However, this is
 more risky because of the possibility of accidental damage to the file.
 If a critical system file such as /etc/passwd is to be edited directly,
 it is, of course, wise to first make a backup copy of it.
</p>

<p>
After adding a new user, the system administrator uses the <i>passwd</i> command to assign that user a password. User accounts can be removed, preferably, with the <i>userdel</i> command but also by deleting the appropriate line from /etc/passwd.
</p>





</td></tr></tbody></table>

<p><br></p>
<p><br></p>
<p><br></p>

<p class="copy">Created August 31, 2007.<br>
Copyright © 2007 The Linux Information Project. All Rights Reserved.</p>



</body></html>